


```dataviewjs

	let bookClass;
	let bookFooter;
	let booksCSS = "";
	
	await dv.header(1, "<div class='filters' id='readingFilter' style='color:blue'>Читаю</div><div class='filters'>|</div><div class='filters' id='listeningFilter'>Слушаю</div>");

	let booksData = dv.pages('"Просвещение/Книги" or "Просвещение/Аудиокниги"').where(page => {
		if (page.читаю || (page.Слушаю)) return page;
	});
	
	for (let book of booksData) {
		// book.Читает ? bookFooter = `Читает: ${book.Читает}` : bookFooter = book.ISBN;
		
		if (book.Читает) {
			bookClass = "listening";
			bookFooter = `Читает: ${book.Читает}`;
		} else {
			bookClass = "reading";
			bookFooter = book.ISBN;
		}
		
		booksCSS += `<div class="book ${bookClass}">
			<div class="header">
				<div class="title">${book.file.name}</div>
				<div class="author">${book.Автор}</div>
			</div>
			<div class="cover">
				<a href="${book.file.path}" class="internal-link" aria-label="${book.Название}"><img src="${book.Обложка}" alt="" /></a>
			</div>
			<div class="bookFooter">
				<div><progress max='${book.ПрогрессMax}' value='${book.Прогресс}'></progress></div>
				<div>${bookFooter}</div>
			</div>
		</div>`
	}
	
	document.querySelector("#readingFilter").addEventListener("click", () => {
		let el = document.querySelector("#readingFilter")
		
		console.log("element", el.style.color)
		
		if (el.style.color == "blue") {
			el.style.color = "gray";
			
			let readingBooks = document.getElementsByClassName("book reading");
			for (let book of readingBooks){
				book.style.display = "none";
			}
		} else if (el.style.color == "gray") {
			el.style.color = "blue";
			
			let readingBooks = document.getElementsByClassName("book reading");
			for (let book of readingBooks){
				book.style.display = "block";
			}
		}
	});
	
	
	document.querySelector("#listeningFilter").addEventListener("click", () => {
		document.querySelector("#listeningFilter").style.color = "gray";
		
		let listeningBooks = document.getElementsByClassName("book listening");
		for (let book of listeningBooks){
			book.style.display = "none";
		}	
	});
	
	
	dv.el("div", booksCSS, {cls: "books"});
	
```

---

# К прочтению | Для прослушивания

```dataviewjs
	
	let bookFooter;
	let booksCSS = "";

	///let booksData = dv.pages('"Просвещение/Книги"').where(page => {
	//	if (page.читаю == false && page.прочитано == false) return page;
	//});
	
	let booksData = dv.pages('"Просвещение/Книги" or "Просвещение/Аудиокниги"').where(page => {
		if ((page.читаю == false && page.прочитано == false) || (page.Слушаю == false && page.Прослушано == false)) return page;
	}).sort(page => page.file.ctime, "desc");

	for (let book of booksData) {
		book.Читает ? bookFooter = `Читает: ${book.Читает}` : bookFooter = book.ISBN;
	
		booksCSS += `<div class="book">
			<div class="header">
				<div class="title">${book.file.name}</div>
				<div class="author">${book.Автор}</div>
			</div>
			<div class="cover">
				<a href="${book.file.path}" class="internal-link" aria-label="${book.Название}"><img src="${book.Обложка}" /></a>
			</div>
			<div class="bookFooter">
				<div>${bookFooter}</div>
			</div>
		</div>`
	}
	
	dv.el("div", booksCSS, {cls: "books"})
```

---

# Прочитано | Прослушано

```dataviewjs
	
	let bookFooter;
	let booksCSS = "";

	let booksData = dv.pages('"Просвещение/Книги" or "Просвещение/Аудиокниги"').where(page => {
		if (page.прочитано || page.Прослушано) return page;
	}).sort(page => page.file.ctime, "desc");


	for (let book of booksData) {
		book.Читает ? bookFooter = `Читает: ${book.Читает}` : bookFooter = book.ISBN;
		
		booksCSS += `<div class="book">
			<div class="header">
				<div class="title">${book.file.name}</div>
				<div class="author">${book.Автор}</div>
			</div>
			<div class="cover">
				<a href="${book.file.path}" class="internal-link" aria-label="${book.Название}"><img src="${book.Обложка}" /></a>
			</div>
			<div class="bookFooter">
				<div>${bookFooter}</div>
			</div>
		</div>`
	}
	
	dv.el("div", booksCSS, {cls: "books"})
```
